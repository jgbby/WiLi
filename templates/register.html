{% extends "layout1.html" %}

{% block title %}
    Register
{% endblock %}
{% block main %}

<section class="presentation">
    <div class="introduction">
        <div class="intro-text">
            <h1>Small steps to ensuring your security!</h1>
        </div>
        <div class="cta">
            <form id="register" action="/register" method="post">
                <input autocomplete="off" autofocus class="form-control" name="username" placeholder="Username" type="text">
                <input name="password" placeholder="Password" type="password">
                <input name="confirmation" placeholder="Re-type Password" type="password">
                <button id="submitbutton" type="submit" class="cta-select"><span>Register</span></button>
            </form>
        </div>
    </div>
</section>

<script src="https://code.jquery.com/jquery-1.11.0.min.js" type="text/javascript"></script>
<script>
document.getElementById("register").addEventListener("click", function(event){
        event.preventDefault()
});
$("#submitbutton").click(function(){
    var username = document.querySelector('input[name="username"]').value;
    $.get("/check?username=" + username, function(data){
        if (data == true) {
            document.querySelector('form').submit();
        }
        else {
            alert("Username is already used");
        }
    })
});
</script>

{% endblock %}